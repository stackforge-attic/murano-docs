<!--
 Copyright (c) 2013 Mirantis, Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<book xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      version="5.0" status="DRAFT"
      xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd
                          http://www.w3.org/1999/xlink http://www.w3.org/1999/xlink.xsd
http://docbook.org/ns/docbook
http://docbook.org/ns/docbook "
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <title>Murano Project Documentation</title>
    <info>
        <author>
            <personname>
                <firstname/>
                <surname/>
            </personname>
            <affiliation>
                <orgname>Mirantis, Inc.</orgname>
            </affiliation>
        </author>
        <copyright>
            <year>2013</year>
            <holder>Mirantis, Inc.</holder>
        </copyright>
        <releaseinfo>v0.1</releaseinfo>
        <productname>Murano™</productname>
        <pubdate>2013-04-04</pubdate>
        <legalnotice role="apache2">
            <annotation>
                <remark>Copyright details are filled in by the template. Change
                    the value of the role
                    attribute on the legalnotice element to change the license.
                </remark>
            </annotation>
        </legalnotice>
        <abstract>
            <para>This document is intended for individuals who wish to
                configure
                and use our product or intend to contribute.
            </para>
        </abstract>
        <cover>
            <para>this is a placeholder for the front cover</para>
        </cover>
        <cover>
            <para>this is a placeholder for the back cover</para>
        </cover>
    </info>
    <chapter>
        <title>Overview</title>
        <para>Welcome to Murano Project.
        </para>
        <section>
            <title>Intended Audience</title>
            <para>This guide is intended to individuals who want to contribute
                to our
                project.
            </para>
        </section>
        <section>
            <title>Document Change History</title>
            <para>This version of the Murano Manual replaces and obsoletes all
                previous versions. The
                most recent changes are described in the table below:
            </para>
            <informaltable rules="all">
                <thead>
                    <tr>
                        <td align="center" colspan="1">Revision Date</td>
                        <td align="center" colspan="4">Summary of Changes</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="1" align="center">April. 4, 2013</td>
                        <td colspan="4">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Initial document creation.</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                </tbody>
            </informaltable>
        </section>
        <section>
            <title>Additional Resources</title>
            <itemizedlist spacing="compact">
                <listitem>
                    <para>
                        <link xlink:href="http://www.mirantis.com">
                            Mirantis - Cloud Software
                        </link>
                    </para>
                </listitem>
            </itemizedlist>
        </section>
    </chapter>
    <chapter>
        <title>Blueprint</title>
        <section>

            <title>Project Background</title>
            <para>Enterprise customers frequently use Windows-based environments for their internal and external
                products. Configuration of the Windows environment is a complex task which usually requires a lot of
                effort from administrators. Windows setup consists of numerous services which might be tightly coupled
                to each other. While the automated installation of Windows services can be fairly straightforward,
                service configuration can be hard to automate because it requires a well-designed Windows architecture
                and deep knowledge of Windows services configuration.
            </para>
            <para>Currently several open source solutions exists that can help to partially solve automation of Windows
                environment provisioning. In the world of OpenStack there is the Heat project, which is similar to
                Amazon Cloud Formation. Heat is an excellent tool for managing OpenStack cloud resources such as VM
                instances, security groups, and so on. It allows you to define all cloud resources in a single JSON
                template, then later maintain all of those resources by editing that template. Although the declarative
                template approach is well suited to OpenStack resources, it quickly becomes complex when it comes to
                application management.
            </para>
            <para>Another option is a tool such as Chef or Puppet. These tools are flexible, but require you to have a
                deep knowledge of scripting and require a significant amount of effort to manually script or modify
                cookbooks for your specific environment configuration. This is manageable in a stable environment, but
                it becomes time-consuming and involves manual script coding when one needs to deploy various
                environments with rapidly changing configurations. Also Chef and Puppet require additional
                infrastructure to support them.
            </para>
            <para>The biggest problem for both approaches above is in supporting multi-step configuration of services
                with circular dependencies required for correct configuration of Windows services. This can be solved by
                using external orchestration.
            </para>
            <para>Another potential problem is the lack of UI functionality enabling creation and configuration of an
                environment without writing a script.
            </para>
            <section>
                <title>Proposal</title>
                <para>Mirantis proposes to introduce a new service which will allow a non-experienced user to deploy
                    reliable Windows based environments in a “push-the-button” manner. The key goal is to provide a UI
                    and API enabling the deployment and operation of Windows Environments at the Windows Services
                    abstraction level. The service should be able to orchestrate complex circular dependent cases in
                    order to set up a complex Windows Environment with multiple dependant services.
                </para>
                <para>The service will address following use cases:
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Self-provisioning of predefined Windows services with their dependencies</para>
                        </listitem>
                        <listitem>
                            <para>Automation of administrative tasks during data center roll-out</para>
                        </listitem>
                        <listitem>
                            <para>Custom windows application as a windows service</para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    The solution will provide higher level of abstraction for manipulation Windows Environments. Key
                    concepts are:
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Windows Service - a service such as Active Directory, MSSQL, or IIS, which usually
                                consists of multiple virtual machines and has multiple dependencies.
                            </para>
                        </listitem>
                        <listitem>
                            <para>Windows Environment - a logical unit for all Services and represents a classical
                                Windows Datacenter
                            </para>
                        </listitem>
                        <listitem>
                            <para>Windows VM instance - a VM which hosts a Windows Service. A Windows Service might be
                                deployed
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    The Key Features of the Service are the following:
                    <orderedlist>
                        <listitem>
                            <para>Native to OpenStack</para>
                        </listitem>
                        <listitem>
                            <para>Introduces abstraction level for Windows Environments</para>
                        </listitem>
                        <listitem>
                            <para>Supports Availability Zones and Disaster Recovery scenarios</para>
                        </listitem>
                        <listitem>
                            <para>Uses native Windows features for HA solutions</para>
                        </listitem>
                    </orderedlist>
                </para>
            </section>
        </section>
        <section xml:id="architecture">
            <title>Architecture</title>
            <para>
                The Murano Service communicates with the following OpenStack components:
                <itemizedlist>
                    <listitem>
                        <para>Horizon - provides a GUI with ability to use all Murano features;</para>
                    </listitem>
                    <listitem>
                        <para>Keystone - authenticates users and provides the security token that is used to work with
                            OpenStack, hence limiting the user abilities in Murano based on OpenStack privileges;
                        </para>
                    </listitem>
                    <listitem>
                        <para>Heat - is used to provision VMs and other OpenStack resources for Windows Environments;
                        </para>
                    </listitem>
                    <listitem>
                        <para>Glance - stores Windows Server VM images, with each image containing an installed OS and a
                            set of scripts
                        </para>
                    </listitem>
                    <listitem>
                        <para>Quantum - provides the network configuration API</para>
                    </listitem>
                    <listitem>
                        <para>Agent - provides agent functionality to communicate with the Orchestration Engine and
                            executes tasks on VMs
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <figure xml:id="muranoarchitecture">
                <title>Architecture</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata fileref="figures/architecture_diagram.png"
                                   contentwidth="5in"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata fileref="figures/architecture_diagram.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <section>
                <title>REST API</title>
                <para>Murano exposes a service endpoint for communication with a client. It exposes API functions to
                    manipulate objects such as environment and service.
                </para>
                <para>This component is responsible for translating API function parameters to Object Model attributes
                    and propagating the deployment status from the Orchestration Engine.
                </para>
            </section>
            <section>
                <title>Object Model</title>
                <para>An internal representation of Windows Services and Environments. All attributes and entities are
                    described in the API specification.
                </para>
            </section>
            <section>
                <title>Orchestration Engine</title>
                <para>This is the core component which evaluates Object Model changes and creates a plan for
                    implementing these changes on the instances or in the cloud. This component will support extensions
                    via plug-ins. Plugins can add new services and extend existing services for integration. Currently
                    there are two services which are already implemented as plugins. They are Active Directory and IIS
                    Service.
                </para>
            </section>
        </section>
        <section>
            <title>Integration with Heat</title>
            <para>Heat is a cloud resource management engine that allows you to manipulate resources that represent
                OpenStack entities (Security Groups, Instances, Floating IPs, Volumes, etc.) and some entities such as
                AutoScaling groups from a single point of control.
            </para>
            <para>OpenStack resource provisioning is one of the steps required for environment deployment and Heat will
                be used for that purpose. Heat allows you to define all OpenStack resources in a single document that
                will be easy to maintain and will not require resorting to multiple OpenStack APIs while keeping the
                software configuration separate.
            </para>
        </section>
        <section>
            <title>Windows on OpenStack</title>
            <para>Windows works on KVM pretty smoothly, and with the RedHat-created open-source VirtIO drivers for
                Windows, it’s possible to work efficiently with KVM exposed devices.
            </para>
            <para>In OpenStack’s Grizzly release, Microsoft’s hypervisor Hyper-V will be supported. The Hyper-V virtual
                switch will be also supported as a Quantum plug-in. From the performance viewpoint, Hyper-V Server 2012
                compares very favorably with bare metal, processing just over 6% fewer transactions per second compared
                to the same workload running on a similarly configured physical server.
            </para>
            <para>Also, unlike the current OpenStack, Hyper-V also natively supports Windows Clusters.
            </para>
        </section>
    </chapter>
    <chapter>
        <title>Roadmap</title>
        <para>
            <itemizedlist spacing="compact">
                <title>
                    <emphasis>Phase 1. Initial Version</emphasis>
                </title>
                <para>(Release date: May 30th)</para>
                <listitem>
                    <para>Core Services: REST API, Orchestration Engine</para>
                </listitem>
                <listitem>
                    <para>Horizon dashboard extension as plugin</para>
                </listitem>
                <listitem>
                    <para>Integration with Heat</para>
                </listitem>
                <listitem>
                    <para>Support single Data Center (no Disaster Recovery)</para>
                </listitem>
                <listitem>
                    <para>Support the following Windows Services:
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>Active Directory - Single Domain with multiple domain controllers</para>
                            </listitem>
                            <listitem>
                                <para>IIS Server - single instance of IIS Server</para>
                            </listitem>
                            <listitem>
                                <para>IIS Cluster - multiple IIS instances with Load Balancing</para>
                            </listitem>
                            <listitem>
                                <para>ASP.NET Application Service - ASP.NET application installed on top of IIS</para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            <itemizedlist spacing="compact">
                <title>
                    <emphasis>Phase 2. Stable Release</emphasis>
                </title>
                <para>(3 month)</para>
                <listitem>
                    <para>Stabilize Core Services (bug fixing)</para>
                </listitem>
                <listitem>
                    <para>Support API, UI extensibility</para>
                </listitem>
                <listitem>
                    <para>UI design</para>
                </listitem>
                <listitem>
                    <para>Workflow and recipes repository</para>
                </listitem>
                <listitem>
                    <para>Data transfer between service instances</para>
                </listitem>
                <listitem>
                    <para>Basic Service monitoring</para>
                </listitem>
                <listitem>
                    <para>Additional Services:
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>MS SQL - single instance of Microsoft SQL Server or Pair of SQL Servers with DB
                                    mirroring
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            <itemizedlist spacing="compact">
                <title>
                    <emphasis>Phase 3</emphasis>
                </title>
                <listitem>
                    <para>Add more services</para>
                </listitem>
                <listitem>
                    <para>Services Dependencies support</para>
                </listitem>
                <listitem>
                    <para>Extended health monitoring</para>
                </listitem>
                <listitem>
                    <para>Agent extensibility (allow 3rd party configuration tools)</para>
                </listitem>
                <listitem>
                    <para>Basic Self-healing (actions on monitoring events)</para>
                </listitem>
                <listitem>
                    <para>Additional Services</para>
                </listitem>
            </itemizedlist>
        </para>

        <para>
            <itemizedlist spacing="compact">
                <title>
                    <emphasis>Phase 4</emphasis>
                </title>
                <listitem>
                    <para>Availability Zones support</para>
                </listitem>
                <listitem>
                    <para>Auto-scaling for Windows services</para>
                </listitem>
                <listitem>
                    <para>Security improvements</para>
                </listitem>
            </itemizedlist>
        </para>
    </chapter>
    <chapter>
        <title>API Specification</title>
        <informaltable rules="all">
            <thead>
                <tr>
                    <td align="center" colspan="1">Revision Date</td>
                    <td align="center" colspan="4">Summary of Changes</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="1" align="center">February 4, 2013</td>
                    <td colspan="4">
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>Initial document creation</para>
                            </listitem>
                        </itemizedlist>
                    </td>
                </tr>
                <tr>
                    <td colspan="1" align="center">February 22, 2013</td>
                    <td colspan="4">
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>Enhance API with latest architecture
                                    changes
                                </para>
                            </listitem>
                        </itemizedlist>
                    </td>
                </tr>
                <tr>
                    <td colspan="1" align="center">March 06, 2013</td>
                    <td colspan="4">
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>Fix specification according to remarks
                                    from Dmitry Teselkin
                                </para>
                            </listitem>
                        </itemizedlist>
                    </td>
                </tr>
                <tr>
                    <td colspan="1" align="center">Jun 06, 2013</td>
                    <td colspan="4">
                        <itemizedlist spacing="compact">
                            <listitem>
                                <para>ASP.NET Application, Web Server Farm and
                                    ASP.NET Application Farm Services Added,
                                    uri/address/endpoint corrections, hostname
                                    assignment section added
                                </para>
                            </listitem>
                        </itemizedlist>
                    </td>
                </tr>
            </tbody>
        </informaltable>
        <section>
            <title>Introduction</title>
            <para>Murano Service API is a programmatic interface used for
                interaction
                with Murano. Other interaction
                mechanisms like Murano Dashboard or Murano CLI should use API
                as underlying
                protocol for interaction.
            </para>

            <glossary>
                <para>For detailed information about entities and terms used in
                    this document, please refer first to
                    <xref
                            linkend="architecture"/>.
                </para>
                <glossentry>
                    <glossterm>Environment</glossterm>
                    <glossdef>
                        <para>Environment is a set of logically related
                            Services managed by a single tenant. Environment
                            defines Windows environment boundaries.
                        </para>
                        <para>Services within single Environment may comprise
                            some complex configuration while Services
                            in different Environments are always independent
                            from one another. Each Environment is
                            associated with single OpenStack project (tenant).
                        </para>
                    </glossdef>
                </glossentry>
                <glossentry>
                    <glossterm>Service</glossterm>
                    <glossdef>
                        <para>Service is building block of Windows environment.
                            Service is a set of one or more Virtual
                            Machines sharing a common purpose and configured
                            together. Each service belongs to a single
                            Environment and single Service Type.
                        </para>
                        <para>Services are comprised from one or more Service
                            Units.
                        </para>
                    </glossdef>
                </glossentry>
                <glossentry>
                    <glossterm>Service Type</glossterm>
                    <glossdef>
                        <para>Service type is definition for describing set of
                            features exposed by service.
                        </para>
                    </glossdef>
                </glossentry>
                <glossentry>
                    <glossterm>Service Unit</glossterm>
                    <glossdef>
                        <para>Service Units are the actual Windows Server VMs
                            instantiated by OpenStack and then
                            configured according to its Service Type (this may
                            also correspond to one of predefined
                            Windows Server roles).
                        </para>
                    </glossdef>
                </glossentry>
                <glossentry>
                    <glossterm>Service Metadata</glossterm>
                    <glossdef>
                        <para>Service Metadata is a JSON-encoded definition of
                            Environment, its Services and their
                            Service Units along with all their attributes.
                            Service Metadata may describe both current
                            and the intended state of the Environment.
                        </para>
                    </glossdef>
                </glossentry>
                <glossentry>
                    <glossterm>Session</glossterm>
                    <glossdef>
                        <para>All changes to environment done in scope of
                            Session. After all changes to Environment
                            state are accumulated, changes actually are applied
                            only after session is deployed.
                        </para>
                    </glossdef>
                </glossentry>
            </glossary>
        </section>
        <section>
            <title>Return codes and errors</title>
            <para>All REST API calls return the natural HTTP response codes for
                the operations, e.g. a successful GET
                returns a HTTP 200, a successful PUT returns a HTTP 201, a GET
                for a non-existent entity returns HTTP
                404, unauthorized operations return HTTP 401 or HTTP 403,
                internal errors return HTTP 500.
            </para>
        </section>
        <section>
            <title>Response of POSTs and PUTs</title>
            <para>All POST and PUT requests by convention should return the
                created object (in the case of POST, with a
                generated ID) as if it was requested by GET.
            </para>
        </section>
        <section>
            <title>Authentication</title>
            <para>All requests include a Keystone authentication token header
                (X-Auth-Token). Clients must authenticate
                with Keystone before interacting with the Murano service.
            </para>
        </section>
        <section>
            <title>Workflow</title>
            <figure xml:id="api_workflow">
                <title>Sample Workflow</title>
                <mediaobject>
                    <imageobject role="fo">
                        <imagedata fileref="figures/api_workflow.png"
                                   contentwidth="5in"/>
                    </imageobject>
                    <imageobject role="html">
                        <imagedata fileref="figures/api_workflow.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <para>Let’s review a sample workflow (series of API calls) for
                creating new Environment with Active
                Directory Service deployment:
                <orderedlist spacing="compact">
                    <listitem>
                        <para>POST /environments/ - Creating new Environment
                        </para>
                    </listitem>
                    <listitem>
                        <para>POST /environments/id/configure – Creating new
                            configuration session for Environment
                        </para>
                    </listitem>
                    <listitem>
                        <para>POST /environments/id/activeDirectory – Creating
                            new ActiveDirectory service
                        </para>
                    </listitem>
                    <listitem>
                        <para>POST /environments/id/sessions/session_id/deploy
                            – Saving and deploying changes
                        </para>
                    </listitem>
                </orderedlist>
            </para>
        </section>
        <section>
            <title>Hostname assignment</title>
            <para>Each Service Object definition may have an attribute
                "unitNamingPattern" that is used to control hostnames
                that will be assigned to spawned VM instances of the
                service.
            </para>
            <para>
                Hostname pattern has the form of "name#" where "#"
                character is replaced with sequential number of unit
                within the service (starting with 1) and all other
                characters remain intact. For example Service with
                unitNamingPatter equal to "ad#-loc" will have units
                with hostnames "ad1-loc", "ad2-loc" etc.
            </para>
            <para>
                "unitNamingPattern" attribute is optional.
                If it is omitted then a unique random hostname
                would be assigned.
            </para>
        </section>
        <section>
            <title>API</title>
            <section>
                <title>Environment API</title>
                <para>This section describes API calls for Environment
                    management.
                </para>
                <section>
                    <title>Get a List of existing Environments</title>
                    <table frame='all'>
                        <title>Environment Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>tenant_id</entry>
                                    <entry>string</entry>
                                    <entry>OpenStack tenant ID</entry>
                                </row>
                                <row>
                                    <entry>version</entry>
                                    <entry>int</entry>
                                    <entry>Current version</entry>
                                </row>
                                <row>
                                    <entry>status</entry>
                                    <entry>string</entry>
                                    <entry>Deployment status: ready, pending, deploying
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments Call</title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments</entry>
                                        <entry>Get a list of existing
                                            Environments
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of environments. Only the
                            basic properties are returned. For details see "Get
                            Environment Detailed Information":
                            <programlisting>
                                <![CDATA[
 {
    "environments": [
        {
            "id": "0ce373a477f211e187a55404a662f968",
            "name": "dc1",
            "created": "2010-11-30T03:23:42Z",
            "updated": "2010-11-30T03:23:44Z",
            "tenant_id": "0849006f7ce94961b3aab4e46d6f229a",
            "version": 1,
            "status": "ready"
        },
        {
            "id": "c697bd2429304820a928d145aa42af59",
            "name": "dc2",
            "created": "2010-11-30T03:23:42Z",
            "updated": "2010-11-30T03:23:44Z",
            "tenant_id": "0849006f7ce94961b3aab4e46d6f229a",
            "version": 2,
            "status": "deploying"
        }
    ]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create Environment instance</title>
                    <table frame='all'>
                        <title>Environment Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments Call</title>
                            <tgroup cols='4' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments</entry>
                                        <entry>Create new Environment</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "env1"
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created environment:
                            <programlisting>
                                <![CDATA[
{
    "id": "ce373a477f211e187a55404a662f968",
    "name": "env1",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "tenant_id": "0849006f7ce94961b3aab4e46d6f229a",
    "version": 0
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Update Environment Instance</title>
                    <table frame='all'>
                        <title>Environment Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>PUT /environments/&lt;id&gt; Call</title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>PUT</entry>
                                        <entry>/environments/&lt;id&gt;</entry>
                                        <entry>Update properties of Environment
                                            instance
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>401</entry>
                                        <entry>User is not authorized to access this tenant resources</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "env1-changed"
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns modified environment object:
                            <programlisting>
                                <![CDATA[
{
    "id": "ce373a477f211e187a55404a662f968",
    "name": "env1-changed",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "tenant_id": "0849006f7ce94961b3aab4e46d6f229a",
    "version": 0
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Get Environment Instance Detailed Information
                    </title>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt; Call</title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;</entry>
                                        <entry>Returns detailed information
                                            about Environment including child
                                            entities
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>401</entry>
                                        <entry>User is not authorized to access this tenant resources</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns environment object with underlying services:
                            <programlisting>
                                <![CDATA[
{
    "environments": [{
         "id": "0ce373a477f211e187a55404a662f968",
         "name": "dc1",
         "created": "2010-11-30T03:23:42Z",
         "updated": "2010-11-30T03:23:44Z",
         "tenant_id": "0849006f7ce94961b3aab4e46d6f229a",
         "version": 1,
         "status": "deploying",
         "services": [
             "activeDirectories": [{
                 "id": "96365940588b479294fe8e6dc073db04",
                 "name": "acme.dc",
                 "created": "2010-11-30T03:23:42Z",
                 "updated": "2010-11-30T03:23:44Z",
                 "status": "deploying",
                 "units": [{
                     "id": "d08887df15b94178b244904b506fe85b",
                     "isMaster": true,
                     "location": "west-dc"
                 }, {
                     "id": "dcf0de317e7046bea555539f19b8ea84",
                     "isMaster": false,
                     "location": "west-dc"
                 }]
             }]
         ]
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Remove Environment</title>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>DELETE /environments/&lt;id&gt; Call</title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>DELETE</entry>
                                        <entry>/environments/&lt;id&gt;</entry>
                                        <entry>Remove specified Environment.
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>401</entry>
                                        <entry>User is not authorized to access this tenant resources</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>None</para>
                    </section>
                </section>
            </section>
            <section>
                <title>Environment Configuration API</title>
                <para>Multiple sessions could be opened for one environment simultaneously, but only one session going
                    to be deployed. First session that starts deploying is going to be deployed; other ones become
                    invalid and could not be deployed at all. User could not open new session for environment that in
                    `deploying` state (that’s why we call it “almost lock free” model).
                </para>
                <table frame='all'>
                    <title>Configuration Session Object</title>
                    <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                        <colspec colnum="1" colname="col1" colwidth="1*"/>
                        <colspec colnum="2" colname="col2" colwidth="1*"/>
                        <colspec colnum="3" colname="col3" colwidth="4*"/>
                        <thead>
                            <row>
                                <entry>Attribute</entry>
                                <entry>Type</entry>
                                <entry>Description</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>id</entry>
                                <entry>string</entry>
                                <entry>Session unique ID</entry>
                            </row>
                            <row>
                                <entry>environment_id</entry>
                                <entry>string</entry>
                                <entry>Environment that going to be modified
                                    during this session
                                </entry>
                            </row>
                            <row>
                                <entry>created</entry>
                                <entry>datetime</entry>
                                <entry>Creation date and time in ISO format
                                </entry>
                            </row>
                            <row>
                                <entry>updated</entry>
                                <entry>datetime</entry>
                                <entry>Modification date and time in ISO
                                    format
                                </entry>
                            </row>
                            <row>
                                <entry>user_id</entry>
                                <entry>string</entry>
                                <entry>Session owner ID</entry>
                            </row>
                            <row>
                                <entry>version</entry>
                                <entry>int</entry>
                                <entry>Environment version for which configuration session is opened</entry>
                            </row>
                            <row>
                                <entry>state</entry>
                                <entry>string</entry>
                                <entry>Session state. Could be: open,
                                    deploying, deployed
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <section>
                    <title>Configure Environment / Open session</title>
                    <para>During this call new working session is created, and session ID should be sent in header
                        (X-Configuration-Session) to all next API calls.
                    </para>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/configure
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/configure</entry>
                                        <entry>Creating new configuration session
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>403</entry>
                                        <entry>Could not open session for environment, environment has deploying
                                            status
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created session:
                            <programlisting>
                                <![CDATA[
{
    "id": "4aecdc2178b9430cbbb8db44fb7ac384",
    "environment_id": "4dc8a2e8986fa8fa5bf24dc8a2e8986fa8",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:54Z",
    "user_id": "d7b501094caf4daab08469663a9e1a2b",
    "version": 12,
    "state": "open"
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Deploy changes from Session</title>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/sessions/&lt;sessionId&gt;/deploy
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/sessions/&lt;sessionId&gt;/deploy</entry>
                                        <entry>Deploying changes made in
                                            session with specified &lt;sessionId&gt;</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>403</entry>
                                        <entry>Session is invalid</entry>
                                    </row>
                                    <row>
                                        <entry>403</entry>
                                        <entry>Session is already deployed or deployment is in progress</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>None</para>
                    </section>
                </section>
                <section>
                    <title>Get session information</title>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/sessions/&lt;sessionId&gt;
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/sessions/&lt;sessionId&gt;</entry>
                                        <entry>Getting details about session
                                            with specified
                                            &lt;sessionId&gt;</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>401</entry>
                                        <entry>User is not authorized to access this session</entry>
                                    </row>
                                    <row>
                                        <entry>403</entry>
                                        <entry>Session is invalid</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns session information:
                            <programlisting>
                                <![CDATA[
{
    "id": "4aecdc2178b9430cbbb8db44fb7ac384",
    "environment_id": "4dc8a2e8986fa8fa5bf24dc8a2e8986fa8",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:54Z",
    "user_id": "d7b501094caf4daab08469663a9e1a2b",
    "version": 0,
    "state": "deploying"
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Delete Session</title>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>DELETE /environments/&lt;id&gt;/sessions/&lt;sessionId&gt;
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>DELETE</entry>
                                        <entry>/environments/&lt;id&gt;/sessions/&lt;sessionId&gt;</entry>
                                        <entry>Delete session with specified
                                            &lt;sessionId&gt;</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Error Response Codes</title>
                            <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Code</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>401</entry>
                                        <entry>User is not authorized to access this session</entry>
                                    </row>
                                    <row>
                                        <entry>403</entry>
                                        <entry>Session is in deploying state and could not be deleted</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>None</para>
                    </section>
                </section>
            </section>
            <section>
                <title>Active Directory API</title>
                <para>This section describes API calls for Active Directory
                    service management.
                </para>
                <section>
                    <title>Get a List of existing Active Directory instances
                    </title>
                    <table frame='all'>
                        <title>Active Directory Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>uri</entry>
                                    <entry>string</entry>
                                    <entry>URI of the Service</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>Active Directory Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Active Directory Unit Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>isMaster</entry>
                                    <entry>boolean</entry>
                                    <entry>true for primary domain controller,
                                        false otherwise</entry>
                                </row>
                                <row>
                                    <entry>address</entry>
                                    <entry>string</entry>
                                    <entry>Unit address</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>AvailabilityZone or specific
                                        physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/activeDirectories
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/activeDirectories</entry>
                                        <entry>Get a list of Active Directory
                                            instances
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>no</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of Active Directory
                            instances:
                            <programlisting>
                                <![CDATA[
{
    "activeDirectories": [{
        "id": "96365940588b479294fe8e6dc073db04",
        "name": "acme.dc",
        "created": "2010-11-30T03:23:42Z",
        "updated": "2010-11-30T03:23:44Z",
        "uri": "10.0.0.2",
        "units": [{
            "id": "d08887df15b94178b244904b506fe85b",
            "isMaster": true,
            "address": "10.0.0.2",
            "location": "west-dc"
        },
        {
            "id": "dcf0de317e7046bea555539f19b8ea84",
            "isMaster": false,
            "address": "10.0.0.3",
            "location": "west-dc"
        }]
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create Active Directory instance</title>
                    <table frame='all'>
                        <title>Active Directory Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>adminPassword</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>Password from domain administrator
                                        account
                                    </entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>yes</entry>
                                    <entry>Active Directory Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Active Directory Unit Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>isMaster</entry>
                                    <entry>boolean</entry>
                                    <entry>yes</entry>
                                    <entry>true for primary domain controller,
                                        false otherwise</entry>
                                </row>
                                <row>
                                    <entry>recoveryPassword</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>Recovery password</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/activeDirectories
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/activeDirectories</entry>
                                        <entry>Create new Active Directory
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>yes</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
    "name": "acme.dc",
    "adminPassword": "password",
    "domain": "acme.dc",
    "units": [
        {
            "isMaster": true,
            "recoveryPassword": "password",
            "location": "west-dc"
        },
        {
            "isMaster": false,
            "recoveryPassword": "password",
            "location": "west-dc"
        }
    ]
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created active directory
                            domain:
                            <programlisting>
                                <![CDATA[
{
    "id": "96365940588b479294fe8e6dc073db04",
    "name": "acme.dc",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "domain": "acme.dc",
    "units": [{
        "id": "d08887df15b94178b244904b506fe85b",
        "isMaster": true,
        "location": "west-dc"
    }, {
        "id": "dcf0de317e7046bea555539f19b8ea84",
        "isMaster": false,
        "location": "west-dc"
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
            </section>
            <section>
                <title>Web Server API</title>
                <para>This section describes API calls for managing Windows web-server software – IIS.</para>
                <section>
                    <title>Get a List of existing Web Servers</title>
                    <table frame='all'>
                        <title>Web Server Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>uri</entry>
                                    <entry>string</entry>
                                    <entry>URI of the Service</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>Domain name.
                                    This attribute may be empty/null/omitted
                                        if machine is not a domain member
                                    </entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>Web Server Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Web Server Unit Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>address</entry>
                                    <entry>string</entry>
                                    <entry>Unit address</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/webServers
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/webServers</entry>
                                        <entry>Get a list of existing Web
                                            Servers
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>no</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of web servers:
                            <programlisting>
                                <![CDATA[
{
  "webServers":
      [
         {
           "id": "0ce373a477f211e187a55404a662f968",
           "name": "frontend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "domain": "ACME",
           "uri": "http://10.0.0.2",
           "units": [{
               "id": "1bf3491c409b4541b6f18ea5988a6437",
               "address": "10.0.0.2",
               "location": "west-dc"
           }]
         },
         {
           "id": "c697bd2429304820a928d145aa42af59",
           "name": "backend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "domain": "ACME",
           "uri": "http://10.0.0.3",
           "units": [{
               "id": "eb32f97866d24001baa430cb34e4049f",
               "address": "10.0.0.3",
               "location": "west-dc"
           }]
         }
      ]
}                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create Web Server instance</title>
                    <table frame='all'>
                        <title>Web Server Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>no</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>yes</entry>
                                    <entry>Web Server Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Web Server Unit Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/webServers
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <colspec colnum="3" colname="col3" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/webServers</entry>
                                        <entry>Create new Web Server</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>yes</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "frontend",
  "adminPassword": "password",
  "domain": "acme.dc",
  "units": [{
    "location": "west-dc"
  }]
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created web server:
                            <programlisting>
                                <![CDATA[
{
    "id": "ce373a477f211e187a55404a662f968",
    "name": "frontend",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "domain": "ACME",
    "units": [{
        "id": "1bf3491c409b4541b6f18ea5988a6437",
        "location": "west-dc"
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
            </section>
            <section>
                <title>ASP.NET Application API</title>
                <para>This section describes API calls for managing ASP.NET
                    Applications</para>
                <section>
                    <title>Get a List of existing ASP.NET Applications</title>
                    <table frame='all'>
                        <title>ASP.NET Application Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>repository</entry>
                                    <entry>string</entry>
                                    <entry>URL of git repository containing the
                                    application source files</entry>
                                </row>
                                <row>
                                    <entry>uri</entry>
                                    <entry>string</entry>
                                    <entry>URI of the Service</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>Domain name.
                                    This attribute may be empty/null/omitted
                                        if machine is not a domain member
                                    </entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>ASP.NET Application Unit
                                        object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>ASP.NET Application Unit Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>address</entry>
                                    <entry>string</entry>
                                    <entry>Unit address</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>AvailabilityZone or specific
                                        physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/aspNetApps
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/aspNetApps</entry>
                                        <entry>Get a list of existing ASP.NET
                                            Applications
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>no</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of ASP.NET Applications:
                            <programlisting>
                                <![CDATA[
{
  "aspNetApps":
      [
         {
           "id": "88f6ed99ff3645bcb84e1e37ab9ece3d",
           "name": "frontend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "domain": "ACME",
           "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
           "uri": "http://10.0.0.2",
           "units": [{
               "id": "59255829f0574297acc1cd3a18ff6fd7",
               "address": "10.0.0.2",
               "location": "west-dc"
           }]
         },
         {
           "id": "aa49dcaff9914b8abb26855f0799b0e0",
           "name": "backend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
           "uri": "http://10.0.0.3",
           "domain": "ACME2" ,
           "units": [{
               "id": "274b54f6bbe6493690e7107aa947e112",
               "address": "10.0.0.3",
               "location": "west-dc"
           }]
         }
      ]
}                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create ASP.NET Application instance</title>
                    <table frame='all'>
                        <title>ASP.NET Application Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>repository</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>URL of git repository containing the
                                    application source files</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>no</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>yes</entry>
                                    <entry>ASP.NET Application Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>ASP.NET Application Unit Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/aspNetApps
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <colspec colnum="3" colname="col3" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/aspNetApps</entry>
                                        <entry>Create new ASP.NET Application</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>yes</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "frontend",
  "adminPassword": "password",
  "domain": "acme.dc",
  "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
  "units": [{
    "location": "west-dc"
  }]
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created ASP.NET Application:
                            <programlisting>
                                <![CDATA[
{
    "id": "5374bd535e26452e8acb6ae3ee87c596",
    "name": "frontend",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "domain": "ACME",
    "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
    "units": [{
        "id": "7bb3f29bcc9449f7b91f7a4d4668499a",
        "location": "west-dc"
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
            </section>
            <section>
                <title>Web Server Farm API</title>
                <para>This section describes API calls for managing Web Server
                    (IIS) Web Farm services</para>
                <section>
                    <title>Get a List of existing Web Server Farms</title>
                    <table frame='all'>
                        <title>Web Server Farm Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>uri</entry>
                                    <entry>string</entry>
                                    <entry>URI of the Service</entry>
                                </row>
                                <row>
                                    <entry>loadBalancerPort</entry>
                                    <entry>integer</entry>
                                    <entry>Port number of the Farm</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>Domain name.
                                    This attribute may be empty/null/omitted
                                        if machine is not a domain member
                                    </entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>Web Server Farm Unit
                                        object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Web Server Farm Unit Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>AvailabilityZone or specific
                                        physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/webServerFarms
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/webServerFarms</entry>
                                        <entry>Get a list of existing
                                            Web Server Farms
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>no</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of Web Server Farms:
                            <programlisting>
                                <![CDATA[
{
  "webServerFarms":
      [
         {
           "id": "01fa4412ab4849acb27394aaf307ca88",
           "name": "frontend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "domain": "ACME",
           "loadBalancerPort": 80,
           "uri": "http://192.168.1.1:80",
           "units": [
               {
                   "id": "a34992c8634b482798187d3c0e1c999a",
                   "address": "10.0.0.2",
                   "location": "west-dc"
               },
               {
                   "id": "fcd60488bb6f4acf97ccdb8f8fc6bc9a",
                   "address": "10.0.0.3",
                   "location": "west-dc"
               }
           ]
         }
      ]
}                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create Web Server Farm instance</title>
                    <table frame='all'>
                        <title>Web Server Farm Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>loadBalancerPort</entry>
                                    <entry>integer</entry>
                                    <entry>yes</entry>
                                    <entry>Port number for the Farm</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>no</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>yes</entry>
                                    <entry>Web Server Farm Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>Web Server Farm Unit Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/webServerFarms
                                Call
                            </title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <colspec colnum="3" colname="col3" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/webServerFarms</entry>
                                        <entry>Create new Web Server Farm</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>yes</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "frontend",
  "adminPassword": "password",
  "domain": "acme.dc",
  "loadBalancerPort": 80,
  "units": [{
    "location": "west-dc"
  }]
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created Web Server Farm:
                            <programlisting>
                                <![CDATA[
{
    "id": "fa723794e1b7454f967deb65b30d2c22",
    "name": "frontend",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "domain": "ACME",
    "loadBalancerPort": 80,
    "units": [{
        "id": "54213d8fb87d41f7a1be2f81dbba0d69",
        "location": "west-dc"
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
            </section>

            <section>
                <title>ASP.NET Application Farm API</title>
                <para>This section describes API calls for managing ASP.NET
                    Web Farm Application Services</para>
                <section>
                    <title>Get a List of existing ASP.NET Application Farms</title>
                    <table frame='all'>
                        <title>ASP.NET Application Farm Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>created</entry>
                                    <entry>datetime</entry>
                                    <entry>Creation date and time in ISO format
                                    </entry>
                                </row>
                                <row>
                                    <entry>updated</entry>
                                    <entry>datetime</entry>
                                    <entry>Modification date and time in ISO
                                        format
                                    </entry>
                                </row>
                                <row>
                                    <entry>uri</entry>
                                    <entry>string</entry>
                                    <entry>URI of the Service</entry>
                                </row>
                                <row>
                                    <entry>repository</entry>
                                    <entry>string</entry>
                                    <entry>URL of git repository containing the
                                    application source files</entry>
                                </row>
                                <row>
                                    <entry>loadBalancerPort</entry>
                                    <entry>integer</entry>
                                    <entry>Port number of the Farm</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>Domain name.
                                    This attribute may be empty/null/omitted
                                        if machine is not a domain member
                                    </entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>ASP.NET Application Farm Unit
                                        object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>ASP.NET Application Farm Unit Object</title>
                        <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>id</entry>
                                    <entry>string</entry>
                                    <entry>Unique ID</entry>
                                </row>
                                <row>
                                    <entry>address</entry>
                                    <entry>string</entry>
                                    <entry>Unit address</entry>
                                </row>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>AvailabilityZone or specific
                                        physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>GET /environments/&lt;id&gt;/aspNetAppFarms
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1'
                                    rowsep='1'>
                                <colspec colnum="1" colname="col1"
                                         colwidth="1*"/>
                                <colspec colnum="2" colname="col2"
                                         colwidth="4*"/>
                                <colspec colnum="3" colname="col3"
                                         colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>GET</entry>
                                        <entry>/environments/&lt;id&gt;/aspNetAppFarms</entry>
                                        <entry>Get a list of existing
                                            ASP.NET Application Farms
                                        </entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>no</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <para>None</para>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns list of ASP.NET Application Farms:
                            <programlisting>
                                <![CDATA[
{
  "aspNetAppFarms":
      [
         {
           "id": "01fa4412ab4849acb27394aaf307ca88",
           "name": "frontend",
           "created": "2010-11-30T03:23:42Z",
           "updated": "2010-11-30T03:23:44Z",
           "domain": "ACME",
           "loadBalancerPort": 80,
           "uri": "http://192.168.1.1:80",
           "units": [
               {
                   "id": "3374f4eb850e4b27bf734649d7004cc0",
                   "address": "10.0.0.2",
                   "location": "west-dc"
               },
               {
                   "id": "fcd60488bb6f4acf97ccdb8f8fc6bc9a",
                   "address": "10.0.0.3",
                   "location": "west-dc"
               }
           ]
         }
      ]
}                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
                <section>
                    <title>Create ASP.NET Application Farm instance</title>
                    <table frame='all'>
                        <title>ASP.NET Application Farm Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>name</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>User-friendly name</entry>
                                </row>
                                <row>
                                    <entry>repository</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>URL of git repository containing the
                                    application source files</entry>
                                </row>
                                <row>
                                    <entry>loadBalancerPort</entry>
                                    <entry>integer</entry>
                                    <entry>yes</entry>
                                    <entry>Port number for the Farm</entry>
                                </row>
                                <row>
                                    <entry>domain</entry>
                                    <entry>string</entry>
                                    <entry>no</entry>
                                    <entry>Domain name</entry>
                                </row>
                                <row>
                                    <entry>units</entry>
                                    <entry>object</entry>
                                    <entry>yes</entry>
                                    <entry>ASP.NET Application Farm Unit object</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <table frame='all'>
                        <title>ASP.NET Application Farm Unit Object</title>
                        <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                            <colspec colnum="1" colname="col1" colwidth="1*"/>
                            <colspec colnum="2" colname="col2" colwidth="1*"/>
                            <colspec colnum="3" colname="col3" colwidth="1*"/>
                            <colspec colnum="4" colname="col4" colwidth="4*"/>
                            <thead>
                                <row>
                                    <entry>Attribute</entry>
                                    <entry>Type</entry>
                                    <entry>Required</entry>
                                    <entry>Description</entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>location</entry>
                                    <entry>string</entry>
                                    <entry>yes</entry>
                                    <entry>AvailabilityZone or specific physical datacenter.
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </table>
                    <section>
                        <title>Call</title>
                        <table frame='all'>
                            <title>POST /environments/&lt;id&gt;/aspNetAppFarms
                                Call
                            </title>
                            <tgroup cols='3' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="1*"/>
                                <colspec colnum="2" colname="col2" colwidth="4*"/>
                                <colspec colnum="3" colname="col3" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Method</entry>
                                        <entry>URI</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>POST</entry>
                                        <entry>/environments/&lt;id&gt;/aspNetAppFarms</entry>
                                        <entry>Create new ASP.NET Application Farm</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                        <table frame='all'>
                            <title>Headers</title>
                            <tgroup cols='4' align='left' colsep='1' rowsep='1'>
                                <colspec colnum="1" colname="col1" colwidth="2*"/>
                                <colspec colnum="2" colname="col2" colwidth="1*"/>
                                <colspec colnum="3" colname="col3" colwidth="1*"/>
                                <colspec colnum="4" colname="col4" colwidth="4*"/>
                                <thead>
                                    <row>
                                        <entry>Name</entry>
                                        <entry>Type</entry>
                                        <entry>Required</entry>
                                        <entry>Description</entry>
                                    </row>
                                </thead>
                                <tbody>
                                    <row>
                                        <entry>X-Configuration-Session</entry>
                                        <entry>string</entry>
                                        <entry>yes</entry>
                                        <entry>ID of valid configuration session</entry>
                                    </row>
                                </tbody>
                            </tgroup>
                        </table>
                    </section>
                    <section>
                        <title>Payload</title>
                        <programlisting>
                            <![CDATA[
{
  "name": "frontend",
  "adminPassword": "password",
  "domain": "acme.dc",
  "loadBalancerPort": 80,
  "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
  "units": [{
    "location": "west-dc"
  }]
}
                            ]]>
                        </programlisting>
                    </section>
                    <section>
                        <title>Returns</title>
                        <para>This call returns created ASP.NET Application Farm:
                            <programlisting>
                                <![CDATA[
{
    "id": "1eb6cd5fc3f24d60a9a4c431512d3708",
    "name": "frontend",
    "created": "2010-11-30T03:23:42Z",
    "updated": "2010-11-30T03:23:44Z",
    "domain": "ACME",
    "loadBalancerPort": 80,
    "repository": "https://github.com/Mirantis/murano-mvc-demo.git",
    "units": [{
        "id": "54213d8fb87d41f7a1be2f81dbba0d69",
        "location": "west-dc"
    }]
}
                                    ]]>
                            </programlisting>
                        </para>
                    </section>
                </section>
            </section>
        </section>

    </chapter>
    <chapter>
        <title>Installation Guide</title>
        <para> This chapter is about installation and configuration Murano services.</para>
        <para>Note that all Murano modules can be downloaded from
            <ulink url="https://launchpad.net/murano/"> our page </ulink> on launchpad.
        </para>
        <section>
            <title>Common Pre-Requirements</title>
            <para>Operation system:</para>
                <orderedlist>
                    <listitem>Ubuntu</listitem>
                    <listitem>RHEL/CentOS</listitem>
                </orderedlist>
            <para>Packages:</para>
            <orderedlist>
                <listitem>python-dev</listitem>
                <listitem>libxml2-dev  </listitem>
                <listitem>libxslt-dev</listitem>
            </orderedlist>

        </section>
        <section>
            <title>Murano API Service</title>
            <para>Murano API provides access to the Murano orchestration engine via API.</para>
            <para>This chapter describes Murano API for contributors of the project, and assumes that you are already
                familiar with Murano API from an end-user perspective.
            </para>
            <section>
                <title>Install</title>
                <itemizedlist>
                    <listitem>
                        <para>Project source can be checked out as git repository (see below) or downloaded from
                            <ulink url="http://tarballs.openstack.org/murano-api/"> here</ulink></para>
                        <programlisting>
                            <![CDATA[
user@work:~/$ git clone https://github.com/stackforge/murano-api.git
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                            <para>Switch to just created directory</para>
                        <programlisting>
                        <![CDATA[
user@work:~/$ cd murano-api
                         ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>And them perform installation:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-api$ chmod +x setup.sh ; sudo ./setup.sh install
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Configure</title>
                <itemizedlist>
                    <listitem>
                        <para> First configure rabbitMQ by adding vhost and user with administrator rights:</para>
                        <programlisting>
                        <![CDATA[
sudo rabbitmqctl add_user murano murano
sudo rabbitmqctl set_user_tags murano administrator
sudo rabbitmqctl add_vhost murano
sudo rabbitmqctl set_permissions -p murano murano ".*" ".*" ".*"
                        ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Copy and edit configuration file:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-api$ sudo cp /etc/murano-api/murano-api.conf.sample /etc/murano-api/murano-api.conf
user@work:~/murano-api$ sudo nano /etc/murano-api/murano-api.conf
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Configure it according to your environment:
                            <para><emphasis>[DEFAULT]</emphasis> section sets up logging.</para>
                            <para> In <emphasis>[reports]</emphasis> section you can set names for new rabbitMQ queues.</para>
                            <para> <emphasis>[rabbitmq]</emphasis> section sets up host configuration where rabbitMQ with just created user and vhost is running.</para>
                        </para>
                        <programlisting>
                            <![CDATA[
[DEFAULT]
# Show more verbose log output (sets INFO log level output)
verbose = True
# Show debugging output in logs (sets DEBUG log level output)
debug = True
# Address to bind the server to
bind_host = 0.0.0.0
# Port the bind the server to
bind_port = 8082
# Log to this file. Make sure the user running skeleton-api has
# permissions to write to this file!
log_file = /tmp/murano-api.log
#A valid SQLAlchemy connection string for the metadata database
sql_connection = sqlite:///murano.sqlite

[reports]
results_exchange = task-results
results_queue = task-results
reports_exchange = task-reports
reports_queue = task-reports

[rabbitmq]
host = localhost
port = 5672
virtual_host = murano
login = murano
password = murano
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Copy and edit one more configuration file:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-api$ sudo cp etc/murano-api/murano-api-paste.ini.sample etc/murano-api/murano-api-paste.ini
user@work:~/murano-api$ sudo nano /etc/murano-api/murano-api-paste.ini
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Configure keystone auth_token in <emphasis>[filter:authtoken]</emphasis> section.
                            For more information see <ulink url="http://docs.openstack.org/developer/keystone/configuringservices.html"> Auth-Token Middleware with Username and Password</ulink></para>
                        <programlisting>
                            <![CDATA[
[pipeline:murano-api]
pipeline = authtoken context apiv1app
[app:apiv1app]
paste.app_factory = muranoapi.api.v1.router:API.factory
[filter:context]
paste.filter_factory = muranoapi.api.middleware.context:ContextMiddleware.factory

[filter:authtoken]
paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory
auth_host = localhost
auth_port = 35357
auth_protocol = http
admin_tenant_name = admin
admin_user = admin
admin_password = password
signing_dir = /tmp/keystone-signing-muranoapi
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Register murano-api service in Openstack
                                (note: you need to be authorized in Openstack to run this commands)
                        </para>
                        <programlisting>
                            <![CDATA[
user@work:~/$ keystone service-create --name muranoapi --type murano --description "Murano-Api Service"
                                    ]]>
                                     <![CDATA[
user@work:~/$ keystone endpoint-create

    --region RegionOne
    --service-id The ID field returned by the keystone service-create
    --publicurl http://x.x.x.x:8082 (where x.x.x.x - host ip where murano-api installed)
    --internalurl the same as publicurl
    --adminurl the same as publicurl
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Run</title>
                <para>Run Murano API and supply valid configuration file:</para>
                <programlisting>
                    <![CDATA[
user@work:~/$ sudo service murano-api start
                    ]]>
                </programlisting>
            </section>
        </section>
        <section>
            <title>Conductor Service</title>
            <para>Conductor is a Murano orchestration engine that transforms object model sent by REST API service into
                a series of Heat and Murano-Agent commands.
            </para>
            <para>This document describes Conductor for contributors of the project.</para>
            <section>
                <title>Install</title>
                <itemizedlist>
                    <listitem>
                        <para>Murano Condutor uses OpenStack Heat for new virtual machines creation, therefore Heat should been installed and configured. Some services require the Internet access for virtual machines to successfull deployment.</para>
                        <para>The detailed information about Heat configuration is described <ulink url="http://docs.openstack.org/developer/heat/getting_started/index.html"> here.</ulink></para>
                    </listitem>
                    <listitem>
                        <para>OpenStack Heat require Key Pair for Load Balancer instances. Murano Conductor uses LoadBalancer for IIS Farms and ASP.NET Farms. The default name for Key Pair is 'murano-lb-key', you can change this parameter in file
                          <![CDATA[
/etc/murano-conductor/data/templates/cf/Windows.template
                          ]]>    
                       </para>
                    </listitem>
                    <listitem>
                        <para>Project source code can be checked out from git repository (see below) or downloaded from
                            <ulink url="http://tarballs.openstack.org/murano-conductor/"> here.</ulink>

                        <programlisting>
                            <![CDATA[
user@work:~/$ git clone https://github.com/stackforge/murano-conductor.git
                            ]]>
                        </programlisting>

                        </para>

                    </listitem>
                    <listitem>
                        <para>Switch to just created directory</para>
                        <programlisting>
                            <![CDATA[
user@work:~/cd murano-conductor
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>And install Conductor Service to the system:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-conductor$ chmod +x setup.sh ; sudo ./setup.sh install
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Configure</title>
                <itemizedlist>
                    <listitem>
                        <para>Edit configuration file:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-conductor$ nano /etc/murano-conductor/conductor.conf
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>
                            Change it according to your environment.
                            <para><emphasis>[DEFAULT]</emphasis> section is responsible for logging.</para>
                            <para><emphasis>[heat]</emphasis> points where heat is running.</para>
                            <para><emphasis>[rabbitmq]</emphasis> section points where your rabbitMQ installed and configured. </para>
                            <para>Take a look <link linkend="ssl">here</link> for more information about SSL configuration</para>
                        </para>
                        <programlisting>
                            <![CDATA[
[DEFAULT]
log_file = logs/conductor.log
debug=True
verbose=True
# Maximum number of environments that can be processed simultaneously
max_environments = 20


[heat]
auth_url = http://localhost:5000/v2.0

[rabbitmq]
host = localhost
port = 5672
virtual_host = murano
login = murano
password = murano

# Use SSL for RabbitMQ connections (True or False)
ssl = False

# Path to SSL CA certificate or empty to allow self signed server certificate
ca_certs =
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Run</title>
                <para>Run Conductor and supply valid configuration file:</para>
                <programlisting>
                    <![CDATA[
user@work:~/murano-conductor$ sudo service murano-conductor start
                    ]]>
                </programlisting>
            </section>
        </section>
        <section>
            <title>Murano Dashboard</title>
                <para>Murano Dashboard provides Web UI for Murano Project.</para>
                <section>
                    <title>Pre-Requirements</title>
                <itemizedlist>
                <listitem>
                    <para>To setup Murano Dashboard on a host with Openstack Dashbord already installed you just need to install <emphasis>
                        the python-muranoclient</emphasis>. You can download it from <ulink url="http://tarballs.openstack.org/python-muranoclient/"> here.</ulink></para>
                        And then perform installation with pip:
                    <programlisting>
                        <![CDATA[
user@work:~/$ sudo pip install ]]> <emphasis>just_downloaded</emphasis>.tar.gz
                    </programlisting>
                </listitem>
                <listitem>
                    <para>If there is no OpenStack Dashboard (horizon) you'll need to install it. See <ulink url="http://docs.openstack.org/trunk/openstack-compute/install/yum/content/ch_install-dashboard.html"> here</ulink> how to do that.</para>
                </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Install</title>
                <itemizedlist>
                    <listitem>
                        <para>Project source code can be checked out from git repository (see below) or downloaded from
                            <ulink url="http://tarballs.openstack.org/murano-dashboard/"> here.</ulink>
                        </para>
                        <programlisting>
                            <![CDATA[
user@work:~/$ git clone https://github.com/stackforge/murano-dashboard.git
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>Switch to just created directory</para>
                        <programlisting>
                            <![CDATA[
user@work:~/$ cd murano-dashboard  ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>And perform installation</para>
                        <programlisting>
                            <![CDATA[
user@work:~/murano-dashboard$ sudo python setup.py install
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Configure</title>
                <itemizedlist>
                    <listitem>
                        <para>Open Django configuration file:</para>
                        <programlisting>
                            <![CDATA[
user@work:~/$ cd <Horizon Installation Dir> && nano settings.py
                            ]]>
                        </programlisting>
                        <para>Please, make sure that no local/local_settings.py file exists.</para>
                    </listitem>
                    <listitem>
                        <para>Add to import section</para>
                        <programlisting>
                            <![CDATA[
from muranoclient.common import exceptions as muranoclient
                            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>And this so muranoclient exceptions can be safely handle by horizon:</para>
                        <programlisting>
                            <![CDATA[
RECOVERABLE_EXC = (muranoclient.HTTPException,
                   muranoclient.CommunicationError,
                   muranoclient.Forbidden)
EXTENDED_RECOVERABLE_EXCEPTIONS = tuple(
    exceptions.RECOVERABLE + RECOVERABLE_EXC)

NOT_FOUND_EXC = (muranoclient.HTTPNotFound, muranoclient.EndpointNotFound)
EXTENDED_NOT_FOUND_EXCEPTIONS = tuple(exceptions.NOT_FOUND + NOT_FOUND_EXC)

UNAUTHORIZED_EXC = (muranoclient.HTTPUnauthorized, )
EXTENDED_UNAUTHORIZED_EXCEPTIONS = tuple(
    exceptions.UNAUTHORIZED + UNAUTHORIZED_EXC)
            ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                        <para>And finally edit HORIZON_CONFIG and INSTALLED_APPS sections</para>
                        <programlisting>
                        <![CDATA[

HORIZON_CONFIG = {
...
    'exceptions': {'recoverable': EXTENDED_RECOVERABLE_EXCEPTIONS,
                   'not_found': EXTENDED_NOT_FOUND_EXCEPTIONS,
                   'unauthorized': EXTENDED_UNAUTHORIZED_EXCEPTIONS},
    'customization_module': 'muranodashboard.panel.overrides'

}
...
INSTALLED_APPS = (
...
    'muranodashboard',
...
)
                            ]]>
                        </programlisting>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Run</title>
                <para>Run Horizon:</para>
                <programlisting>
                    <![CDATA[
user@work:~/$ sudo service apache2 restart
                    ]]>
                </programlisting>
            </section>
        </section>
        <section>
            <title id='ssl'>SSL configuration</title>
            <para>All communications and transactions can be encrypted with SSL. Since there are different types of protocols that
                communicate on different levels several steps are required to make Murano work with SSL.</para>
            <section>
            <title>HTTPS for the REST API service</title>
                <para>SOME TEXT HERE</para>
            </section>
            <section>
                <title>SSL for Rabbit MQ</title>
                <para>"Murano" components communicate with each other by Rabbit MQ. By default all messages in Rabbit MQ are not encrypted. So all communication flows should have ssl option enabled.
                </para>
                <itemizedlist>
                    <listitem>
                        <para><emphasis>Rabbit MQ -> Murano Conductor exchange</emphasis></para>
                        <para>Open <emphasis> /etc/murano-conductor/conductor.conf </emphasis> and set ssl option to True in rabbitmq section.
                            Specify the path to the SSL CA certificate in regular format:  /path/to/file without quotes if you want to allow self-signed certificates.
                        </para>
                        <programlisting>
                            <![CDATA[
    [rabbitmq]

    # Use SSL for RabbitMQ connections (True or False)
    ssl = False

    # Path to SSL CA certificate or empty to allow self signed server certificate
    ca_certs =
                                                    ]]>
                        </programlisting>
                    </listitem>
                    <listitem>
                    <para> Murano Agent -> Rabbit MQ exchange </para>
                    <para>By default all Murano Conductor configuration settings apply to Murano Agent. If you want to configure Murano Agent
                        in a different way change the default template. It can be found here: <emphasis>/murano-conductor/data/templates/agent-config/Default.template.</emphasis>
                        Take a look on appSettings section:
                    </para>
                    <programlisting>
                            <![CDATA[
    <appSettings>
        <add key="rabbitmq.host" value="%RABBITMQ_HOST%"/>
        <add key="rabbitmq.port" value="%RABBITMQ_PORT%"/>
        <add key="rabbitmq.user" value="%RABBITMQ_USER%"/>
        <add key="rabbitmq.password"
             value="%RABBITMQ_PASSWORD%"/>
        <add key="rabbitmq.vhost" value="%RABBITMQ_VHOST%"/>
        <add key="rabbitmq.inputQueue"
             value="%RABBITMQ_INPUT_QUEUE%"/>
        <add key="rabbitmq.resultExchange" value=""/>
        <add key="rabbitmq.resultRoutingKey"
             value="%RESULT_QUEUE%"/>
        <add key="rabbitmq.durableMessages" value="true"/>

        <add key="rabbitmq.ssl" value="%RABBITMQ_VHOST%"/>
        <add key="rabbitmq.allowInvalidCA" value="true"/>
        <add key="rabbitmq.sslServerName" value=""/>
    </appSettings>
        ]]>
                        </programlisting>
                    <para> Desired parameter should be set directly to the value of the key that you want to change. Quotes are need to be kept. </para>
                    </listitem>
                </itemizedlist>
            </section>
        </section>
    </chapter>
    <chapter>
        <title>ScreenShots</title>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/1.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/1.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/2.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/2.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/3.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/3.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/4.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/4.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/5.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/5.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/6.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/6.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/7.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/7.png"/>
            </imageobject>
        </mediaobject>
        <mediaobject>
            <imageobject role="fo">
                <imagedata fileref="figures/screens/1.png"
                           contentwidth="5in"/>
            </imageobject>
            <imageobject role="html">
                <imagedata fileref="figures/screens/1.png"/>
            </imageobject>
        </mediaobject>
    </chapter>
    <chapter>
        <title>How To Participate</title>
        <para>If you would like to ask some questions or make proposals, feel free to reach us on #murano irc channel at
            FreeNode. Typically somebody from our team will be online at irc from 6:00 to 20:00 UTC. You can also
            contact
            Murano community directly by
            <link xlink:href="mailto:murano-all@lists.launchpad.net">murano-all@lists.launchpad.net</link>
            (please, note that your email address should be registered in launchpad, otherwise your mail will be ignored
            by
            mailing system).
        </para>
        <para>
            We’re going to hold public weekly meetings on Mondays at 17:00 UTC on #openstack-meeting-alt irc channel.
        </para>
        <para>If you want to contribute either to docs or to code, simply send us change request via
            <link xlink:href="http://review.openstack.org">review.openstack.org</link>
            (gerrit). You can file bugs and register blueprints at Murano<link
                    xlink:href="https://launchpad.net/murano">launchpad page</link>.
        </para>
    </chapter>
</book>
